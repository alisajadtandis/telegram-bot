<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>لیسه خاتم النبیین - پنل کاربری</title>
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <style>
    /* فونت دوران از CDN */
    @font-face { font-family: "Doran"; src: url("https://cdn.fontcdn.ir/Font/Persian/Doran/doran.woff2") format("woff2"); }
    :root{ 
      --primary:#002855; 
      --white:#fff; 
      --muted:#f5f8fb; 
      --accent:#e8f1ff; 
      --motion-dur:320ms; 
      --motion-ease:cubic-bezier(.2,.9,.3,1);
      --accent-color-1: #0d6efd;
      --accent-color-2: #00b4d8;
      --text-secondary: #dbe9ff;
      --shadow-color: rgba(0,0,0,0.4);
      --text-color: #ffffff;
      --animation-timing: 0.3s;
    }

    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:'Doran','Vazirmatn',Tahoma,sans-serif;background:var(--muted);color:var(--primary);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}

    /* صفحه لودینگ جدید */
    #loadingScreen {
      position: fixed;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 200;
      background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
      overflow: hidden;
    }
    
    .loading-container {
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      position: relative;
    }
    
    .loading-logo {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      border: 3px solid rgba(255,255,255,0.3);
      box-shadow: 0 0 30px rgba(255,255,255,0.5);
      margin-bottom: 30px;
      animation: logoPulse 2s infinite alternate;
      z-index: 10;
    }
    
    @keyframes logoPulse {
      0% { transform: scale(1); box-shadow: 0 0 20px rgba(255,255,255,0.5); }
      100% { transform: scale(1.1); box-shadow: 0 0 40px rgba(255,255,255,0.8); }
    }
    
    .loading-text {
      color: white;
      font-size: 1.5rem;
      margin-bottom: 20px;
      text-shadow: 0 2px 10px rgba(0,0,0,0.3);
      z-index: 10;
    }
    
    .loading-animation {
      width: 80px;
      height: 80px;
      position: relative;
      z-index: 10;
    }
    
    /* انیمیشن‌های مختلف لودینگ */
    .loading-animation.type-1 .spinner {
      width: 80px;
      height: 80px;
      border: 5px solid rgba(255,255,255,0.3);
      border-top: 5px solid white;
      border-radius: 50%;
      animation: spin 1.5s linear infinite;
    }
    
    .loading-animation.type-2 .dots {
      display: flex;
      gap: 10px;
    }
    
    .loading-animation.type-2 .dot {
      width: 15px;
      height: 15px;
      border-radius: 50%;
      background: white;
      animation: bounce 1.4s infinite ease-in-out both;
    }
    
    .loading-animation.type-2 .dot:nth-child(1) { animation-delay: -0.32s; }
    .loading-animation.type-2 .dot:nth-child(2) { animation-delay: -0.16s; }
    
    .loading-animation.type-3 .wave {
      display: flex;
      gap: 5px;
      align-items: flex-end;
      height: 40px;
    }
    
    .loading-animation.type-3 .bar {
      width: 8px;
      background: white;
      border-radius: 4px;
      animation: wave 1.2s infinite ease-in-out;
    }
    
    .loading-animation.type-3 .bar:nth-child(1) { height: 20px; animation-delay: 0s; }
    .loading-animation.type-3 .bar:nth-child(2) { height: 30px; animation-delay: 0.1s; }
    .loading-animation.type-3 .bar:nth-child(3) { height: 40px; animation-delay: 0.2s; }
    .loading-animation.type-3 .bar:nth-child(4) { height: 30px; animation-delay: 0.3s; }
    .loading-animation.type-3 .bar:nth-child(5) { height: 20px; animation-delay: 0.4s; }
    
    .loading-animation.type-4 .circle {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      border: 4px solid transparent;
      border-top: 4px solid white;
      border-right: 4px solid white;
      animation: spin 1s linear infinite;
    }
    
    .loading-animation.type-5 .pulse {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      background: white;
      animation: pulse 1.5s infinite;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    @keyframes bounce {
      0%, 80%, 100% { transform: scale(0); }
      40% { transform: scale(1); }
    }
    
    @keyframes wave {
      0%, 40%, 100% { transform: scaleY(0.5); }
      20% { transform: scaleY(1); }
    }
    
    @keyframes pulse {
      0% { transform: scale(0.8); opacity: 0.7; }
      50% { transform: scale(1.2); opacity: 1; }
      100% { transform: scale(0.8); opacity: 0.7; }
    }
    
    .loading-bg-elements {
      position: absolute;
      inset: 0;
      overflow: hidden;
    }
    
    .floating-element {
      position: absolute;
      border-radius: 50%;
      background: rgba(255,255,255,0.1);
      animation: float 15s infinite linear;
    }
    
    .floating-element:nth-child(1) {
      width: 100px;
      height: 100px;
      top: 10%;
      left: 10%;
      animation-duration: 20s;
    }
    
    .floating-element:nth-child(2) {
      width: 150px;
      height: 150px;
      top: 60%;
      left: 80%;
      animation-duration: 25s;
    }
    
    .floating-element:nth-child(3) {
      width: 70px;
      height: 70px;
      top: 80%;
      left: 20%;
      animation-duration: 15s;
    }
    
    .floating-element:nth-child(4) {
      width: 120px;
      height: 120px;
      top: 30%;
      left: 70%;
      animation-duration: 30s;
    }
    
    @keyframes float {
      0% { transform: translate(0, 0) rotate(0deg); }
      25% { transform: translate(100px, 50px) rotate(90deg); }
      50% { transform: translate(50px, 100px) rotate(180deg); }
      75% { transform: translate(-50px, 50px) rotate(270deg); }
      100% { transform: translate(0, 0) rotate(360deg); }
    }

    /* لودینگ ساده برای تغییر صفحات */
    .simple-loading {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 1000;
      background: rgba(255,255,255,0.9);
      padding: 15px;
      border-radius: 10px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
      display: none;
      backdrop-filter: blur(5px);
    }

    .simple-spinner {
      width: 40px;
      height: 40px;
      border: 4px solid #f3f3f3;
      border-top: 4px solid #0d6efd;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    /* انیمیشن‌های انتقال بین صفحات */
    .section-exit {
      animation: pageFadeOut 0.3s ease-out forwards;
    }

    @keyframes pageFadeOut {
      from {
        opacity: 1;
        transform: translateY(0);
      }
      to {
        opacity: 0;
        transform: translateY(-20px);
      }
    }

    /* SIDE LOGO */
    #sideLogo {
      position:fixed;
      left:0;
      top:50%;
      transform:translateY(-50%) translateX(0);
      z-index:10;
      pointer-events:none;
      display:block;
      width:360px;
      max-width:40vw;
      height:auto;
      overflow:hidden;
      filter: blur(12px) saturate(.9);
      opacity:.22;
      -webkit-mask-image: linear-gradient(90deg, rgba(0,0,0,1) 0%, rgba(0,0,0,0.05) 60%, rgba(0,0,0,0) 80%);
      mask-image: linear-gradient(90deg, rgba(0,0,0,1) 0%, rgba(0,0,0,0.05) 60%, rgba(0,0,0,0) 80%);
    }
    #sideLogo img { width:100%; height:auto; display:block; }

    @media (max-width:700px){
      #sideLogo{ width:140vw; max-width:none; left: -50vw; transform:translateY(-50%); opacity:.18; filter: blur(12px) saturate(.9); }
    }

    #loginScreen, #appRoot, .container { position:relative; z-index:20; }

    /* ---- LOGIN SCREEN ---- */
    #loginScreen{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:linear-gradient(180deg,#08345f 0%, #0d4c92 100%);z-index:120;transition:opacity .25s ease}
    .login-container{width:100%;max-width:420px;padding:20px}
    .login-card{background:transparent;border-radius:15px;padding:25px;text-align:center;color:#fff;box-shadow:0 8px 30px rgba(0,0,0,0.25);border:2px solid rgba(255,255,255,0.12)}
    .logo-wrapper{width:80px;height:80px;border-radius:50%;overflow:hidden;margin:0 auto 14px auto;border:3px solid #fff;display:flex;justify-content:center;align-items:center;background:#fff}
    .logo{width:100%;height:100%;object-fit:cover;border-radius:50%}
    h1{font-size:1.1rem;line-height:1.8rem;margin-bottom:8px}
    .subtitle{font-size:.95rem;margin-bottom:18px;color:rgba(255,255,255,0.9)}
    form{display:flex;flex-direction:column;gap:10px}
    label{font-size:.9rem;text-align:right}
    .login-input{padding:10px;border:none;border-radius:12px;outline:none;font-size:1rem;text-align:right;background:rgba(255,255,255,0.07);color:#fff}
    .login-input::placeholder{color:rgba(255,255,255,0.75)}
    .btn-login{background-color:#003566;color:white;border:1px solid rgba(255,255,255,0.12);padding:10px;border-radius:10px;font-size:0.95rem;cursor:pointer;transition:background .2s;font-family:inherit}
    .btn-login:hover{background-color:var(--primary)}
    .links{margin-top:12px;font-size:.9rem}
    .links a{color:#fff;text-decoration:none;opacity:.95}
    .message{margin-top:12px;padding:10px;border-radius:8px;font-size:.95rem;background:rgba(255,255,255,0.06);min-height:36px;display:flex;align-items:center;justify-content:center}

    #loginScreen.hidden{opacity:0;pointer-events:none;visibility:hidden}

    /* Welcome Screen Styles */
    #welcomeScreen {
      position: fixed;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 150;
      background: #003566;
      transition: opacity 0.25s ease;
    }

    .welcome-box {
      position: relative;
      width: min(320px, 85vw);
      height: min(480px, 85vh);
      border-radius: 20px;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      align-items: center;
      padding: 30px 20px;
      background: linear-gradient(145deg, rgba(255,255,255,0.05), rgba(255,255,255,0.15));
      box-shadow: 0 15px 35px var(--shadow-color);
      z-index: 2;
    }

    .welcome-box::before {
      content: '';
      position: absolute;
      inset: 0;
      background: url("https://i.ibb.co/bT5qnj4/background.jpg") no-repeat center/cover;
      filter: blur(2px) brightness(0.9);
      z-index: -1;
      opacity: 0.95;
    }

    .welcome-box .content {
      position: relative;
      z-index: 3;
      text-align: center;
      padding: 1rem;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 1.5rem;
      opacity: 0;
      animation: floatIn 1s ease-out forwards;
    }

    .welcome-box .welcome-logo {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      border: 2px solid var(--text-color);
      box-shadow: 0 0 15px rgba(255,255,255,0.2);
      animation: glow 3s ease-in-out infinite alternate;
      transition: transform 0.3s ease;
      object-fit: cover;
      margin-bottom: 20px;
    }

    @keyframes floatIn {
      0% { opacity: 0; transform: translateY(20px); }
      100% { opacity: 1; transform: translateY(0); }
    }

    @keyframes glow {
      0% { box-shadow: 0 0 10px rgba(255,255,255,0.5); }
      50% { box-shadow: 0 0 25px rgba(255,255,255,0.8); }
      100% { box-shadow: 0 0 10px rgba(255,255,255,0.5); }
    }

    @keyframes btnPulse {
      from { box-shadow: 0 0 15px rgba(13,110,253,0.6); }
      to { box-shadow: 0 0 25px rgba(0,180,216,0.8); }
    }

    .enter-btn {
      font-family: "Doran", sans-serif;
      padding: 12px 25px;
      background: linear-gradient(145deg, var(--accent-color-1), var(--accent-color-2));
      color: var(--text-color);
      font-size: 14px;
      font-weight: bold;
      border: none;
      border-radius: 25px;
      cursor: pointer;
      z-index: 3;
      box-shadow: 0 0 15px rgba(13,110,253,0.6);
      transition: all var(--animation-timing) ease;
      animation: btnPulse 2s ease-in-out infinite alternate;
      margin-bottom: 10px;
      position: relative;
      overflow: hidden;
    }

    .enter-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(120deg, 
        transparent,
        rgba(255,255,255,0.3),
        transparent
      );
      transition: 0.5s;
      pointer-events: none;
    }

    .enter-btn:hover {
      transform: scale(1.1) rotate(-1deg);
      box-shadow: 0 0 25px rgba(0,180,216,0.8), 
                 0 0 35px rgba(13,110,253,0.6);
    }

    .enter-btn:hover::before {
      left: 100%;
    }

    .slide-up-enter {
      animation: slideUpIn 520ms cubic-bezier(.2,.9,.3,1) both;
    }

    @keyframes slideUpIn {
      0% { opacity: 0; transform: translateY(40px) scale(.995); }
      60% { opacity: 1; transform: translateY(-8px) scale(1.002); }
      100% { opacity: 1; transform: translateY(0) scale(1); }
    }

    .welcome-exit {
      animation: welcomeExit 420ms cubic-bezier(.2,.9,.3,1) both;
    }

    @keyframes welcomeExit {
      0% { opacity: 1; transform: translateY(0) scale(1); }
      100% { opacity: 0; transform: translateY(-20px) scale(.98); }
    }

    .welcome-enter {
      animation: welcomeEnter 520ms cubic-bezier(.2,.9,.3,1) both;
    }

    @keyframes welcomeEnter {
      0% { opacity: 0; transform: translateY(36px) scale(.994); }
      60% { opacity: 1; transform: translateY(-10px) scale(1.004); }
      100% { opacity: 1; transform: translateY(0) scale(1); }
    }

    /* ---- APP STYLES ---- */
    .container{display:flex;height:100vh;gap:0;overflow:hidden;transition:padding-left .28s}
    
    /* سایدبار با انیمیشن */
    .sidebar{
      width:220px;
      background:var(--primary);
      color:var(--white);
      padding:16px;
      display:flex;
      flex-direction:column;
      gap:12px;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
    }
    
    .sidebar.collapsed{
      width:70px;
    }
    
    /* دکمه toggle با آیکون تغییر و انیمیشن */
    .toggle-btn{
      background:rgba(255,255,255,0.06);
      border:none;
      color:var(--white);
      padding:6px;
      border-radius:8px;
      cursor:pointer;
      text-align:center;
      font-size: 16px;
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
    }
    
    .toggle-btn:hover {
      background: rgba(255,255,255,0.1);
      transform: scale(1.05);
    }
    
    /* آیکون منو با انیمیشن */
    .toggle-btn::before {
      content: '☰';
      transition: all 0.3s ease;
    }
    
    .sidebar:not(.collapsed) .toggle-btn::before {
      content: '✕';
      transform: rotate(180deg);
    }

    .logo{
      font-weight:700;
      font-size:18px;
      padding-bottom:8px;
      border-bottom:1px solid rgba(255,255,255,0.08);
      display:flex;
      align-items:center;
      gap:8px;
      transition: all 0.3s ease;
      white-space: nowrap;
      overflow: hidden;
    }
    
    .logo .short{display:none}
    .sidebar.collapsed .logo .long{
      display:none;
      opacity: 0;
      transform: translateX(-10px);
    }
    
    .sidebar.collapsed .logo .short{
      display:block;
      opacity: 1;
      transform: translateX(0);
    }
    
    .sidebar:not(.collapsed) .logo .long{
      display:block;
      opacity: 1;
      transform: translateX(0);
      transition: all 0.3s ease 0.1s;
    }

    .user{
      display:flex;
      gap:12px;
      align-items:center;
      transition: all 0.3s ease;
      padding: 8px 0;
    }
    
    .sidebar.collapsed .user .meta{
      display:none;
      opacity: 0;
      transform: translateX(-10px);
    }
    
    .sidebar:not(.collapsed) .user .meta{
      display:block;
      opacity: 1;
      transform: translateX(0);
      transition: all 0.3s ease 0.15s;
    }

    .avatar{
      width:48px;
      height:48px;
      border-radius:50%;
      background:rgba(255,255,255,0.12);
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight:700;
      transition: all 0.3s ease;
      flex-shrink: 0;
    }
    
    /* استایل جدید برای ناوبری با اسکرول بار در سمت راست */
    .nav{
      display:flex;
      flex-direction:column;
      gap:8px;
      margin-top:6px;
      overflow-y: auto;
      overflow-x: hidden;
      flex: 1;
      padding-left: 0;
      padding-right: 8px;
      max-height: calc(100vh - 200px);
      transition: all 0.3s ease;
      direction: ltr; /* جهت محتوا به چپ */
    }

    /* اسکرول بار در سمت راست */
    .nav::-webkit-scrollbar {
      width: 6px;
    }

    .nav::-webkit-scrollbar-track {
      background: rgba(255, 255, 255, 0.1);
      border-radius: 10px;
      margin: 4px 0;
    }

    .nav::-webkit-scrollbar-thumb {
      background: linear-gradient(180deg, #00b4d8, #0d6efd);
      border-radius: 10px;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .nav::-webkit-scrollbar-thumb:hover {
      background: linear-gradient(180deg, #0d6efd, #00b4d8);
    }

    /* استایل اسکرول بار برای فایرفاکس */
    .nav {
      scrollbar-width: thin;
      scrollbar-color: #00b4d8 rgba(255, 255, 255, 0.1);
    }

    .nav a{
      color:var(--white);
      text-decoration:none;
      padding:10px;
      border-radius:8px;
      display:flex;
      gap:12px;
      align-items:center;
      opacity:0.98;
      cursor:pointer;
      transition: all 0.3s ease;
      border: 1px solid transparent;
      min-height: 40px;
      direction: rtl; /* جهت متن به راست */
    }

    .nav a:hover,.nav a.active{
      background: rgba(255,255,255,0.1);
      border-color: rgba(255,255,255,0.2);
      transform: translateX(-4px);
    }

    .nav .icon{
      width:20px;
      height:20px;
      text-align:center;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      font-style:normal;
      transition: all 0.3s ease;
      flex-shrink: 0;
      font-size: 16px;
    }

    .nav a:hover .icon {
      transform: scale(1.1);
    }

    .nav a .icon{
      width:20px;
      height:20px;
      text-align:center;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }

    .nav a .label{
      white-space:nowrap;
      transition: all 0.3s ease;
      flex: 1;
    }
    
    .sidebar.collapsed .nav a .label{
      display:none;
      opacity: 0;
      transform: translateX(-10px);
    }
    
    .sidebar:not(.collapsed) .nav a .label{
      display:block;
      opacity: 1;
      transform: translateX(0);
      transition: all 0.3s ease 0.2s;
    }

    /* مخفی کردن اسکرول بار وقتی منو بسته است */
    .sidebar.collapsed .nav {
      overflow: hidden;
    }

    .sidebar.collapsed .nav::-webkit-scrollbar {
      display: none;
    }

    .main{
      flex:1;
      padding:18px;
      background:linear-gradient(180deg,#fff,#fbfdff 100%);
      overflow:auto;
      display:flex;
      flex-direction:column;
      transition:all .28s
    }

    .header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:12px;
      margin-bottom:14px
    }

    .search{
      background:var(--primary);
      color:var(--white);
      border:none;
      padding:8px 12px;
      border-radius:8px;
      min-width: 180px;
      font-size: 0.9rem;
    }
    
    /* تغییرات فقط برای موبایل */
    @media (max-width:900px){
      .container{
        flex-direction:column;
        position: relative;
      }
      
      .sidebar{
        position: fixed;
        right: -100%;
        top: 0;
        height: 100vh;
        width: 280px;
        transition: right 0.3s ease;
        z-index: 100;
        flex-direction: column;
        align-items: stretch;
        box-shadow: -5px 0 25px rgba(0,0,0,0.3);
        padding-top: 20px;
      }
      
      .sidebar.active {
        right: 0;
      }
      
      .main {
        width: 100%;
        padding: 15px;
      }
      
      .mobile-menu-btn {
        display: block;
        background: var(--primary);
        color: white;
        border: none;
        padding: 8px 12px;
        border-radius: 8px;
        cursor: pointer;
        font-size: 14px;
        z-index: 101;
        position: relative;
      }
      
      .mobile-menu-btn {
        display: none;
      }

      .nav {
        max-height: calc(100vh - 150px);
        padding-right: 8px;
      }

      .nav::-webkit-scrollbar {
        width: 4px;
      }
    }
    
    @media (max-width:900px){
      .mobile-menu-btn {
        display: block;
      }
      .toggle-btn {
        display: none;
      }
    }

    /* انیمیشن برای بخش‌های صفحه */
    .page-section {
      animation: sectionSlideIn 0.4s ease-out;
    }

    @keyframes sectionSlideIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .animate-in{animation:fadeUp var(--motion-dur) var(--motion-ease) both}
    @keyframes fadeUp{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:none}}
    
    .bg-logo{
      position:fixed;
      inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      z-index:0;
      pointer-events:none;
      opacity:0.6;
    }
    .bg-logo img{
      width:80vmin;
      filter: blur(4px) saturate(0.95);
      transform:scale(1.05);
    }

    .dashboard-content {
      position: relative;
      z-index: 2;
    }

    .topbar {
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:20px;
      margin-bottom:18px;
    }
    .title {
      text-align:left;
    }
    .title h2{margin:0;font-size:28px;color:var(--primary); text-shadow: 0 2px 0 rgba(255,255,255,0.8)}
    .title p{margin:6px 0 0;color:var(--muted);font-size:13px}

    .search-btn{
      background:linear-gradient(180deg,#082a45,#0e4a7b);
      color:#fff;padding:10px 16px;border-radius:10px;border:none;
      box-shadow:0 6px 18px rgba(3,36,66,0.18);
      cursor:pointer;font-weight:700;
      font-size: 0.9rem;
    }

    .metrics{
      display:flex;
      gap:18px;
      margin-bottom:18px;
    }
    .metric {
      flex:1; min-width:120px;
      background:var(--white); border-radius:16px; padding:16px;
      box-shadow: 0 10px 25px rgba(10,31,60,0.08);
      display:flex; flex-direction:column; align-items:center; justify-content:center;
      gap:8px;
    }
    .metric .label{color:var(--muted); font-size:14px}
    .metric .value{font-size:28px; font-weight:800; color:var(--primary)}

    .panels{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:18px;
    }

    .panel{
      background:var(--white); border-radius:16px; padding:16px;
      box-shadow: 0 10px 25px rgba(10,31,60,0.06);
      min-height:320px;
    }
    .panel h3{margin:0 0 12px 0;color:var(--primary);font-size:20px}

    .parent-grid{
      display:flex; flex-direction:column; gap:12px;
    }
    .parent-row{
      display:flex; gap:12px; align-items:center; justify-content:space-between;
      background:#fff;border-radius:10px;padding:10px 12px; box-shadow:0 6px 12px rgba(3,36,66,0.03)
    }
    .parent-row .left{display:flex;gap:12px;align-items:center}
    .parent-row .avatar{width:44px;height:44px;border-radius:8px;background:linear-gradient(135deg,#e9f6ff,#fff);display:grid;place-items:center;font-weight:700;color:var(--primary)}
    .parent-row .meta{font-weight:700;color:var(--primary)}
    .parent-row .status{font-size:13px;color:var(--muted)}
    .parent-row .actions{display:flex;gap:8px}
    .parent-row .actions button{
      background:transparent;
      border:none;
      cursor:pointer;
      font-size:14px;
      padding:5px;
      border-radius:4px;
      transition:all 0.2s ease;
    }
    .parent-row .actions .delete-btn{color:#dc3545}
    .parent-row .actions .delete-btn:hover{background:#f8d7da}
    .parent-row .actions .edit-btn{color:#0d6efd}
    .parent-row .actions .edit-btn:hover{background:#e7f1ff}

    .charts-col{display:flex;flex-direction:column;gap:18px}

    .chart-card{background:var(--white);border-radius:12px;padding:14px; box-shadow:0 8px 20px rgba(3,36,66,0.04)}
    .canvas-wrap{height:210px;padding:6px}

    .create-account {
      position:fixed;
      left:36px; bottom:36px;
      z-index:40;
      background:linear-gradient(145deg,#0d6efd,#00b4d8);
      color:#fff;padding:10px 16px;border-radius:12px;border:none;
      box-shadow:0 12px 30px rgba(13,110,253,0.22);
      cursor:pointer;font-weight:800;
      font-size: 0.9rem;
    }

    .modal-back{
      position:fixed; inset:0; background:rgba(6,24,48,0.55); display:none; place-items:center; z-index:60;
      animation:fadeIn .2s;
    }
    .modal-back.show{display:grid}
    .modal{
      width:640px; max-width:96%; background:#fff; border-radius:12px; padding:18px; box-shadow:0 20px 60px rgba(0,0,0,0.35)
    }
    .form-row{display:flex;gap:12px; margin-bottom:10px}
    .form-row .col{flex:1}
    .input{width:100%;padding:10px;border-radius:8px;border:1px solid #e6eef8;background:#fbfdff}
    .select{padding:10px;border-radius:8px;border:1px solid #e6eef8;background:#fbfdff;width:100%}
    .modal-actions{display:flex;gap:12px;justify-content:flex-start;margin-top:8px}
    .btn{padding:10px 14px;border-radius:10px;border:none;cursor:pointer}
    .btn.primary{background:linear-gradient(90deg,#0d6efd,#00b4d8);color:#fff}
    .btn.ghost{background:transparent;border:1px solid #e6eef8}

    @media (max-width:1000px){
      .panels{grid-template-columns:1fr; padding-bottom:70px}
    }

    @keyframes fadeIn{from{opacity:0}to{opacity:1}}
    .moving-bubble{
      position:absolute; left:10%; top:30%;
      width:160px;height:160px; border-radius:50%;
      background:radial-gradient(circle at 30% 30%, rgba(255,255,255,0.4), rgba(255,255,255,0.08));
      opacity:0.12; transform:translateY(0);
      animation:float 6s ease-in-out infinite alternate;
      z-index:0;
    }
    @keyframes float{0%{transform:translateY(0)}100%{transform:translateY(-16px)}}

    .footer-note{margin-top:12px;color:var(--muted);font-size:13px}
    
    .toast{position:fixed;left:20px;top:20px;background:var(--primary);color:white;padding:10px 14px;border-radius:8px;box-shadow:0 6px 16px rgba(0,0,0,0.12);z-index:70;transform:translateY(-8px);opacity:0;transition:transform 220ms var(--motion-ease),opacity 220ms var(--motion-ease)}
    .toast.show{transform:none;opacity:1}

    /* استایل برای لیست‌ها */
    .list-container {
      max-height: 400px;
      overflow-y: auto;
      margin-top: 15px;
    }
    
    .list-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px;
      border-bottom: 1px solid #eee;
      transition: background 0.2s;
    }
    
    .list-item:hover {
      background: #f8f9fa;
    }
    
    .list-item .info {
      flex: 1;
    }
    
    .list-item .actions {
      display: flex;
      gap: 10px;
    }
    
    .list-item .actions button {
      background: transparent;
      border: none;
      cursor: pointer;
      font-size: 14px;
      padding: 5px;
      border-radius: 4px;
      transition: all 0.2s ease;
    }
    
    .list-item .actions .delete-btn {
      color: #dc3545;
    }
    
    .list-item .actions .delete-btn:hover {
      background: #f8d7da;
    }
    
    .list-item .actions .edit-btn {
      color: #0d6efd;
    }
    
    .list-item .actions .edit-btn:hover {
      background: #e7f1ff;
    }
  </style>
</head>
<body>
  <!-- صفحه لودینگ جدید -->
  <div id="loadingScreen">
    <div class="loading-container">
      <div class="loading-bg-elements">
        <div class="floating-element"></div>
        <div class="floating-element"></div>
        <div class="floating-element"></div>
        <div class="floating-element"></div>
      </div>
      <img src="https://i.ibb.co/7JKqJxVp/logo.jpg" alt="لوگو" class="loading-logo">
      <div class="loading-text">لیسه خاتم النبیین</div>
      <div class="loading-animation" id="loadingAnimation">
        <!-- انیمیشن لودینگ به صورت پویا اضافه می‌شود -->
      </div>
    </div>
  </div>

  <div id="sideLogo" aria-hidden="true">
    <img src="https://i.ibb.co/7JKqJxVp/logo.jpg" alt="لوگو">
  </div>

  <!-- LOGIN SCREEN -->
  <div id="loginScreen" role="dialog" aria-modal="true" style="display: none;">
    <div class="login-container">
      <div class="login-card" role="document" aria-label="فرم ورود">
        <div class="logo-wrapper">
          <img class="logo" src="https://i.ibb.co/7JKqJxVp/logo.jpg" alt="لوگو">
        </div>
        <h1>به پنل لیسه خاتم النبیین خوش آمدید</h1>
        <p class="subtitle">برای ورود نام کاربری و پسورد خود را وارد نمایید</p>

        <form id="loginForm" autocomplete="off">
          <label for="username">نام کاربری</label>
          <input id="username" class="login-input" name="username" placeholder="نام کاربری" required>

          <label for="password">پسورد</label>
          <input id="password" type="password" class="login-input" name="password" placeholder="پسورد" required>

          <button type="submit" class="btn-login">ورود</button>
        </form>

        <div id="loginMessage" class="message" aria-live="polite"></div>

        <div class="links">
          <a href="https://t.me/alisajadsafdari">پسورد را فراموش کرده‌اید؟</a> — 
          <a href="#" onclick="event.preventDefault()">ساخت حساب</a>
        </div>
      </div>
    </div>
  </div>

  <!-- Welcome Screen -->
  <div id="welcomeScreen" role="dialog" aria-modal="true" style="display: none;">
    <main class="welcome-box">
      <div class="content">
        <img src="https://i.ibb.co/7JKqJxVp/logo.jpg" alt="لوگوی مکتب خاتم النبیین" class="welcome-logo">
        <h1 style="color: white; font-size: 1.5rem; margin: 1rem 0;">به پنل مدیریتی خویش <br><br>خوش آمدید!</h1>
        <p style="color: var(--text-secondary); font-size: 1rem;">لیسه عالی خصوصی خاتم النبیین</p>
      </div>
      <button class="enter-btn" type="button" aria-label="ورود به پنل مدیریت" id="enterBtn" style="color: #002855;">ورود به پنل</button>
    </main>
  </div>

  <!-- APP -->
  <div id="appRoot" style="display:none">
    <div class="container" role="application">
      <aside class="sidebar" aria-label="منوی اصلی" id="sidebar">
        <div style="display:flex;gap:8px;align-items:center">
          <button class="toggle-btn" id="toggleSidebar" aria-label="باز/بسته کردن منو"></button>
          <div class="logo">
            <div class="long">لیسه عالی خصوصی النبیین</div>
            <div class="short">لیسه</div>
          </div>
        </div>

        <div class="user">
          <!-- لوگو از این بخش حذف شده -->
          <div class="avatar" id="sidebar-avatar" aria-hidden="true">AS</div>
          <div class="meta">
            <div style="font-weight:600" id="sidebar-name">علی سجاد صفدری</div>
            <div style="font-size:12px;opacity:.9" id="sidebar-role">برنامه نویس وبسایت</div>
          </div>
        </div>

        <nav class="nav" aria-label="ناوبری" id="nav">
          <a href="#" data-section="dashboard" class="active" aria-current="page">
            <div class="icon"><i class="fas fa-home"></i></div>
            <span class="label">صفحه اصلی</span>
          </a>
          <a href="#" data-section="sarteacher">
            <div class="icon"><i class="fas fa-user-tie"></i></div>
            <span class="label">سرمعلمیت</span>
          </a>
          <a href="#" data-section="corses">
            <div class="icon"><i class="fas fa-book"></i></div>
            <span class="label">کورس ها</span>
          </a>
          <a href="#" data-section="anzabati">
            <div class="icon"><i class="fas fa-clipboard-check"></i></div>
            <span class="label">انضباطی</span>
          </a>
          <a href="#" data-section="manababashari">
            <div class="icon"><i class="fas fa-users"></i></div>
            <span class="label">منابع بشری</span>
          </a>
          <a href="#" data-section="hamlonaql">
            <div class="icon"><i class="fas fa-bus"></i></div>
            <span class="label">حمل و نقل</span>
          </a>
          <a href="#" data-section="tahwilkhana">
            <div class="icon"><i class="fas fa-warehouse"></i></div>
            <span class="label">تحویل خانه</span>
          </a>
          <a href="#" data-section="raporfiss">
            <div class="icon"><i class="fas fa-file-alt"></i></div>
            <span class="label">راپور فیس ها</span>
          </a>
          <a href="#" data-section="hasabatmali">
            <div class="icon"><i class="fas fa-calculator"></i></div>
            <span class="label">حسابات مالی</span>
          </a>
          <a href="#" data-section="karbaran">
            <div class="icon"><i class="fas fa-user-cog"></i></div>
            <span class="label">کاربران</span>
          </a>
          <a href="#" data-section="karkardhaykarbaran">
            <div class="icon"><i class="fas fa-chart-line"></i></div>
            <span class="label">کارکرد های کابران</span>
          </a>
          <a href="#" data-section="messages">
            <div class="icon"><i class="fas fa-envelope"></i></div>
            <span class="label">پیام ها</span>
          </a>
          <a href="#" data-section="hasabatmaliman">
            <div class="icon"><i class="fas fa-wallet"></i></div>
            <span class="label">حسابات مالی من</span>
          </a>
          <a href="#" data-section="raporhazariman">
            <div class="icon"><i class="fas fa-user-check"></i></div>
            <span class="label">راپور حاضری من</span>
          </a>
          <a href="#" data-section="profile">
            <div class="icon"><i class="fas fa-user"></i></div>
            <span class="label">پروفایل</span>
          </a>
          <a href="#" data-section="grades">
            <div class="icon"><i class="fas fa-chart-bar"></i></div>
            <span class="label">نمرات</span>
          </a>
          <a href="#" data-section="settings">
            <div class="icon"><i class="fas fa-cog"></i></div>
            <span class="label">تنظیمات برنامه</span>
          </a>
          <a href="#" data-section="logout">
            <div class="icon"><i class="fas fa-sign-out-alt"></i></div>
            <span class="label">خروج</span>
          </a>
        </nav>

        <div class="footer"><p>نسخهٔ مینیمال — طراحی ساده</p></div>
      </aside>

      <main class="main" role="main" id="main">
        <div class="bg-logo"><img src="https://i.ibb.co/7JKqJxVp/logo.jpg" alt="logo-bg"></div>

        <div class="header">
          <div>
            <h1 class="hi" id="page-title">سلام، صفدری</h1>
            <div class="small" id="page-sub">به پنل کاربری خوش آمدید</div>
          </div>
          <div style="display:flex;gap:10px;align-items:center">
            <button class="mobile-menu-btn" id="mobileMenuBtn" aria-label="باز کردن منو" style="width: 65px; height: 33px;">☰</button>
            <input class="search" type="search" placeholder="جستجو..." aria-label="جستجو" id="search">
          </div>
        </div>

        <div id="page-content">
          <!-- محتوای صفحه اصلی -->
          <section id="dashboard" class="page-section dashboard-content">
            <div class="topbar">
              <div class="title">
                <h2>صفحه اصلی</h2>
                <p>نمای کلی</p>
              </div>
            </div>

            <div class="metrics">
              <div class="metric">
                <div class="label" style="color: #676869;">صنف های فعال</div>
                <div class="value" id="activeClasses">0</div>
              </div>
              <div class="metric">
                <div class="label" style="color: #676869;">دانش‌آموزان</div>
                <div class="value" id="studentsCount">0</div>
              </div>
              <div class="metric">
                <div class="label" style="color: #676869;">اعلان‌ها</div>
                <div class="value" id="annCount">0</div>
              </div>
              <div class="metric">
                <div class="label" style="color: #676869;">والدین</div>
                <div class="value" id="parentsCount">0</div>
              </div>
            </div>

            <div class="panels">
              <section class="panel">
                <h3>آخرین والدین دانش‌آموزان که در وب بودند:</h3>

                <div class="parent-grid" id="parentsList">
                  <!-- dynamically rendered -->
                </div>

                <div class="footer-note">برای افزودن اکانت جدید از دکمه "ساخت اکانت" استفاده کنید.</div>
              </section>

              <aside class="panel charts-col">
                <div class="chart-card">
                  <h4 style="margin:0 0 8px 0;color:var(--primary)">روزهای هفته — نمودار هیستوگرام</h4>
                  <div class="canvas-wrap"><canvas id="histChart"></canvas></div>
                </div>

                <div class="chart-card">
                  <h4 style="margin:0 0 8px 0;color:var(--primary)">گزارش کلی</h4>
                  <div class="canvas-wrap"><canvas id="pieChart"></canvas></div>
                </div>
              </aside>
            </div>
          </section>

          <!-- بخش اعلان‌ها -->
          <section id="announcements" class="page-section" style="display:none">
            <div class="topbar">
              <div class="title">
                <h2>اعلان‌ها</h2>
                <p>مدیریت اعلان‌های سیستم</p>
              </div>
            </div>
            
            <div class="panel">
              <h3>لیست اعلان‌ها</h3>
              <div class="list-container" id="announcementsList">
                <!-- dynamically rendered -->
              </div>
            </div>
          </section>

          <!-- بخش شاگردان -->
          <section id="students" class="page-section" style="display:none">
            <div class="topbar">
              <div class="title">
                <h2>شاگردان</h2>
                <p>مدیریت دانش‌آموزان</p>
              </div>
            </div>
            
            <div class="panel">
              <h3>لیست شاگردان</h3>
              <div class="list-container" id="studentsList">
                <!-- dynamically rendered -->
              </div>
            </div>
          </section>

          <!-- بخش صنف‌ها -->
          <section id="classes" class="page-section" style="display:none">
            <div class="topbar">
              <div class="title">
                <h2>صنف‌ها</h2>
                <p>مدیریت کلاس‌های درسی</p>
              </div>
            </div>
            
            <div class="panel">
              <h3>لیست صنف‌ها</h3>
              <div class="list-container" id="classesList">
                <!-- dynamically rendered -->
              </div>
            </div>
          </section>

          <div class="moving-bubble" aria-hidden="true"></div>

          <button class="create-account" id="openCreate">+ ساخت اکانت</button>

          <div class="modal-back" id="modalBack">
            <div class="modal" role="dialog" aria-modal="true">
              <h3>ساخت اکانت جدید</h3>
              <h4>برای ساخت اکانت جدید شما باید رهنمایی را بخوانید ، پس لطفا روی <a href="asco/رهنما/login_2.html" style="color: #00b4d8; text-decoration: none;"> رهنمایی </a>کلیک کنید ...</h4>

              <div class="form-row">
                <div class="col">
                  <label>نوع اکانت</label>
                  <select id="accType" class="select">
                    <option value="parent">والد</option>
                    <option value="teacher">استاد</option>
                    <option value="student">شاگرد</option>
                  </select>
                </div>
                <div class="col">
                  <label>نام کامل</label>
                  <input id="accName" class="input" placeholder="مثلاً: علی سجاد">
                </div>
              </div>

              <div class="form-row">
                <div class="col">
                  <label>صنف</label>
                  <input id="accClass" class="input" placeholder="مثلاً: یازدهم">
                </div>
                <div class="col">
                  <label>وضعیت</label>
                  <select id="accStatus" class="select">
                    <option value="online">آنلاین</option>
                    <option value="offline">آفلاین</option>
                  </select>
                </div>
              </div>

              <div class="form-row">
                <div class="col">
                  <label>اطلاعات اضافی</label>
                  <input id="accNote" class="input" placeholder="مثلاً: مالک یا سرپرست">
                </div>
                <div class="col">
                  <label>تعداد اعلام</label>
                  <input id="accAnn" type="number" class="input" min="0" value="0">
                </div>
              </div>

              <div class="modal-actions">
                <button class="btn primary" id="saveAcc">ذخیره اکانت</button>
                <button class="btn ghost" id="closeModal">انصراف</button>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>
  </div>

  <!-- لودینگ ساده برای تغییر صفحات -->
  <div class="simple-loading" id="simpleLoading">
    <div class="simple-spinner"></div>
  </div>

  <!-- Chart.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <script>
    (function(){
      // متغیرهای اصلی
      const loadingScreen = document.getElementById('loadingScreen');
      const loginScreen = document.getElementById('loginScreen');
      const welcomeScreen = document.getElementById('welcomeScreen');
      const appRoot = document.getElementById('appRoot');
      const loginForm = document.getElementById('loginForm');
      const loginMessage = document.getElementById('loginMessage');
      const enterBtn = document.getElementById('enterBtn');
      const sidebar = document.getElementById('sidebar');
      const toggleSidebar = document.getElementById('toggleSidebar');
      const mobileMenuBtn = document.getElementById('mobileMenuBtn');
      const navLinks = document.querySelectorAll('.nav a');
      const pageContent = document.getElementById('page-content');
      const openCreate = document.getElementById('openCreate');
      const modalBack = document.getElementById('modalBack');
      const closeModal = document.getElementById('closeModal');
      const saveAcc = document.getElementById('saveAcc');
      const searchInput = document.getElementById('search');
      const simpleLoading = document.getElementById('simpleLoading');
      
      // داده‌های ذخیره‌شده در localStorage
      let users = JSON.parse(localStorage.getItem('users')) || [];
      let announcements = JSON.parse(localStorage.getItem('announcements')) || [];
      let classes = JSON.parse(localStorage.getItem('classes')) || [];
      
      // اطلاعات ورود صحیح
      const CORRECT_USERNAME = 'ali';
      const CORRECT_PASSWORD = '1234';
      
      // تابع برای ایجاد انیمیشن لودینگ تصادفی
      function createRandomLoadingAnimation() {
        const animationTypes = [1, 2, 3, 4, 5];
        const randomType = animationTypes[Math.floor(Math.random() * animationTypes.length)];
        const loadingAnimation = document.getElementById('loadingAnimation');
        
        loadingAnimation.className = 'loading-animation type-' + randomType;
        
        switch(randomType) {
          case 1:
            loadingAnimation.innerHTML = '<div class="spinner"></div>';
            break;
          case 2:
            loadingAnimation.innerHTML = '<div class="dots"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>';
            break;
          case 3:
            loadingAnimation.innerHTML = '<div class="wave"><div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div></div>';
            break;
          case 4:
            loadingAnimation.innerHTML = '<div class="circle"></div>';
            break;
          case 5:
            loadingAnimation.innerHTML = '<div class="pulse"></div>';
            break;
        }
      }
      
      // شبیه‌سازی لودینگ
      setTimeout(() => {
        loadingScreen.style.opacity = '0';
        setTimeout(() => {
          loadingScreen.style.display = 'none';
          loginScreen.style.display = 'flex';
          setTimeout(() => {
            loginScreen.classList.remove('hidden');
          }, 50);
        }, 500);
      }, 3000);
      
      // ایجاد انیمیشن لودینگ تصادفی
      createRandomLoadingAnimation();
      
      // مدیریت فرم ورود
      loginForm.addEventListener('submit', function(e) {
        e.preventDefault();
        const username = document.getElementById('username').value;
        const password = document.getElementById('password').value;
        
        // اعتبارسنجی
        if (username === CORRECT_USERNAME && password === CORRECT_PASSWORD) {
          loginMessage.textContent = 'در حال ورود...';
          loginMessage.style.color = 'white';
          
          // شبیه‌سازی فرآیند ورود
          setTimeout(() => {
            loginScreen.classList.add('hidden');
            setTimeout(() => {
              welcomeScreen.style.display = 'flex';
              setTimeout(() => {
                welcomeScreen.classList.add('welcome-enter');
              }, 50);
            }, 300);
          }, 1000);
        } else {
          loginMessage.textContent = 'نام کاربری یا رمز عبور اشتباه است!';
          loginMessage.style.color = '#ff6b6b';
        }
      });
      
      // ورود به پنل اصلی
      enterBtn.addEventListener('click', function() {
        welcomeScreen.classList.add('welcome-exit');
        setTimeout(() => {
          welcomeScreen.style.display = 'none';
          appRoot.style.display = 'block';
          initDashboard();
        }, 400);
      });
      
      // مدیریت سایدبار
      toggleSidebar.addEventListener('click', function() {
        sidebar.classList.toggle('collapsed');
      });
      
      // مدیریت منوی موبایل
      mobileMenuBtn.addEventListener('click', function() {
        sidebar.classList.toggle('active');
      });
      
      // مدیریت ناوبری
      navLinks.forEach(link => {
        link.addEventListener('click', function(e) {
          e.preventDefault();
          const section = this.getAttribute('data-section');
          
          // انیمیشن خروج از صفحه فعلی
          const currentSection = document.querySelector('.page-section[style*="display: block"]');
          if (currentSection) {
            currentSection.classList.add('section-exit');
          }
          
          // به‌روزرسانی وضعیت فعال
          navLinks.forEach(l => l.classList.remove('active'));
          this.classList.add('active');
          
          setTimeout(() => {
            // به‌روزرسانی محتوا
            showSection(section);
            
            // بستن منو در موبایل
            if (window.innerWidth <= 900) {
              sidebar.classList.remove('active');
            }
          }, 300);
        });
      });
      
      // نمایش بخش‌های مختلف
      function showSection(section) {
        // نمایش لودینگ ساده
        simpleLoading.style.display = 'block';
        
        setTimeout(() => {
          // در اینجا می‌توانید محتوای هر بخش را بارگذاری کنید
          const pageTitle = document.getElementById('page-title');
          const pageSub = document.getElementById('page-sub');
          
          // مخفی کردن تمام بخش‌ها
          const sections = document.querySelectorAll('.page-section');
          sections.forEach(sec => {
            sec.style.display = 'none';
            sec.classList.remove('section-exit');
          });
          
          switch(section) {
            case 'dashboard':
              pageTitle.textContent = 'سلام، صفدری';
              pageSub.textContent = 'به پنل کاربری خوش آمدید';
              document.getElementById('dashboard').style.display = 'block';
              updateDashboardStats();
              break;
            case 'announcements':
              pageTitle.textContent = 'اعلان‌ها';
              pageSub.textContent = 'مدیریت اعلان‌های سیستم';
              document.getElementById('announcements').style.display = 'block';
              renderAnnouncementsList();
              break;
            case 'students':
              pageTitle.textContent = 'شاگردان';
              pageSub.textContent = 'مدیریت دانش‌آموزان';
              document.getElementById('students').style.display = 'block';
              renderStudentsList();
              break;
            case 'classes':
              pageTitle.textContent = 'صنف‌ها';
              pageSub.textContent = 'مدیریت کلاس‌های درسی';
              document.getElementById('classes').style.display = 'block';
              renderClassesList();
              break;
            case 'logout':
              // بازگشت به صفحه ورود
              appRoot.style.display = 'none';
              loginScreen.classList.remove('hidden');
              document.getElementById('username').value = '';
              document.getElementById('password').value = '';
              loginMessage.textContent = '';
              break;
            default:
              pageTitle.textContent = 'صفحه ' + section;
              pageSub.textContent = 'مدیریت ' + section;
          }
          
          // مخفی کردن لودینگ
          simpleLoading.style.display = 'none';
        }, 500); // تأخیر 500ms برای شبیه‌سازی لودینگ
      }
      
      // مدیریت مودال ساخت اکانت
      openCreate.addEventListener('click', function() {
        modalBack.classList.add('show');
      });
      
      closeModal.addEventListener('click', function() {
        modalBack.classList.remove('show');
      });
      
      saveAcc.addEventListener('click', function() {
        const accType = document.getElementById('accType').value;
        const accName = document.getElementById('accName').value;
        const accClass = document.getElementById('accClass').value;
        const accStatus = document.getElementById('accStatus').value;
        const accNote = document.getElementById('accNote').value;
        const accAnn = document.getElementById('accAnn').value;
        
        if (accName) {
          // ایجاد کاربر جدید
          const newUser = {
            id: Date.now(),
            type: accType,
            name: accName,
            class: accClass,
            status: accStatus,
            note: accNote,
            announcements: parseInt(accAnn),
            lastSeen: new Date().toLocaleString('fa-IR')
          };
          
          users.push(newUser);
          localStorage.setItem('users', JSON.stringify(users));
          
          showToast(`اکانت ${accType} برای ${accName} با موفقیت ایجاد شد`);
          modalBack.classList.remove('show');
          
          // پاک کردن فرم
          document.getElementById('accName').value = '';
          document.getElementById('accClass').value = '';
          document.getElementById('accNote').value = '';
          document.getElementById('accAnn').value = '0';
          
          // به‌روزرسانی داشبورد
          updateDashboardStats();
          renderParentsList();
        } else {
          showToast('لطفاً نام کامل را وارد کنید', 'error');
        }
      });
      
      // مدیریت جستجو
      searchInput.addEventListener('input', function() {
        const searchTerm = this.value.toLowerCase();
        
        // در اینجا می‌توانید منطق جستجو را پیاده‌سازی کنید
        if (searchTerm.length > 2) {
          console.log('جستجو برای:', searchTerm);
        }
      });
      
      // نمایش نوتیفیکیشن
      function showToast(message, type = 'success') {
        const toast = document.createElement('div');
        toast.className = 'toast';
        toast.textContent = message;
        toast.style.background = type === 'error' ? '#dc3545' : '#198754';
        
        document.body.appendChild(toast);
        
        setTimeout(() => {
          toast.classList.add('show');
        }, 10);
        
        setTimeout(() => {
          toast.classList.remove('show');
          setTimeout(() => {
            document.body.removeChild(toast);
          }, 300);
        }, 3000);
      }
      
      // مقداردهی اولیه داشبورد
      function initDashboard() {
        // ایجاد داده‌های نمونه در صورت نبود
        if (announcements.length === 0) {
          announcements = [
            { id: 1, title: 'جلسه اولیا و مربیان', date: '1402/10/15' },
            { id: 2, title: 'برگزاری امتحانات نیمسال', date: '1402/10/20' }
          ];
          localStorage.setItem('announcements', JSON.stringify(announcements));
        }
        
        if (classes.length === 0) {
          classes = [
            { id: 1, name: 'صنف دهم', teacher: 'استاد احمدی', students: 25 },
            { id: 2, name: 'صنف یازدهم', teacher: 'استاد محمودی', students: 30 }
          ];
          localStorage.setItem('classes', JSON.stringify(classes));
        }
        
        // به‌روزرسانی آمار
        updateDashboardStats();
        
        // نمایش والدین
        renderParentsList();
        
        // ایجاد نمودارها
        createCharts();
      }
      
      // به‌روزرسانی آمار داشبورد
      function updateDashboardStats() {
        const parentUsers = users.filter(user => user.type === 'parent');
        const studentUsers = users.filter(user => user.type === 'student');
        const teacherUsers = users.filter(user => user.type === 'teacher');
        
        document.getElementById('activeClasses').textContent = classes.length;
        document.getElementById('studentsCount').textContent = studentUsers.length;
        document.getElementById('annCount').textContent = announcements.length;
        document.getElementById('parentsCount').textContent = parentUsers.length;
      }
      
      // نمایش لیست والدین
      function renderParentsList() {
        const parentsList = document.getElementById('parentsList');
        const parentUsers = users.filter(user => user.type === 'parent');
        
        parentsList.innerHTML = '';
        
        if (parentUsers.length === 0) {
          parentsList.innerHTML = '<div class="parent-row"><div class="left">هیچ والدی ثبت نشده است</div></div>';
          return;
        }
        
        parentUsers.forEach(parent => {
          const parentRow = document.createElement('div');
          parentRow.className = 'parent-row';
          
          parentRow.innerHTML = `
            <div class="left">
              <div class="avatar">${parent.name.charAt(0)}</div>
              <div>
                <div class="meta">${parent.name}</div>
                <div class="status">${parent.status} - ${parent.lastSeen}</div>
              </div>
            </div>
            <div class="actions">
              <button class="edit-btn" data-id="${parent.id}"><i class="fas fa-edit"></i></button>
              <button class="delete-btn" data-id="${parent.id}"><i class="fas fa-trash"></i></button>
            </div>
          `;
          
          parentsList.appendChild(parentRow);
        });
        
        // اضافه کردن event listener برای دکمه‌های حذف
        document.querySelectorAll('.parent-row .delete-btn').forEach(btn => {
          btn.addEventListener('click', function() {
            const userId = parseInt(this.getAttribute('data-id'));
            deleteUser(userId);
          });
        });
      }
      
      // نمایش لیست اعلان‌ها
      function renderAnnouncementsList() {
        const announcementsList = document.getElementById('announcementsList');
        
        announcementsList.innerHTML = '';
        
        if (announcements.length === 0) {
          announcementsList.innerHTML = '<div class="list-item"><div class="info">هیچ اعلانی ثبت نشده است</div></div>';
          return;
        }
        
        announcements.forEach(announcement => {
          const listItem = document.createElement('div');
          listItem.className = 'list-item';
          
          listItem.innerHTML = `
            <div class="info">
              <div class="meta">${announcement.title}</div>
              <div class="status">تاریخ: ${announcement.date}</div>
            </div>
            <div class="actions">
              <button class="edit-btn" data-id="${announcement.id}"><i class="fas fa-edit"></i></button>
              <button class="delete-btn" data-id="${announcement.id}"><i class="fas fa-trash"></i></button>
            </div>
          `;
          
          announcementsList.appendChild(listItem);
        });
        
        // اضافه کردن event listener برای دکمه‌های حذف
        document.querySelectorAll('#announcementsList .delete-btn').forEach(btn => {
          btn.addEventListener('click', function() {
            const announcementId = parseInt(this.getAttribute('data-id'));
            deleteAnnouncement(announcementId);
          });
        });
      }
      
      // نمایش لیست شاگردان
      function renderStudentsList() {
        const studentsList = document.getElementById('studentsList');
        const studentUsers = users.filter(user => user.type === 'student');
        
        studentsList.innerHTML = '';
        
        if (studentUsers.length === 0) {
          studentsList.innerHTML = '<div class="list-item"><div class="info">هیچ شاگردی ثبت نشده است</div></div>';
          return;
        }
        
        studentUsers.forEach(student => {
          const listItem = document.createElement('div');
          listItem.className = 'list-item';
          
          listItem.innerHTML = `
            <div class="info">
              <div class="meta">${student.name}</div>
              <div class="status">صنف: ${student.class} - وضعیت: ${student.status}</div>
            </div>
            <div class="actions">
              <button class="edit-btn" data-id="${student.id}"><i class="fas fa-edit"></i></button>
              <button class="delete-btn" data-id="${student.id}"><i class="fas fa-trash"></i></button>
            </div>
          `;
          
          studentsList.appendChild(listItem);
        });
        
        // اضافه کردن event listener برای دکمه‌های حذف
        document.querySelectorAll('#studentsList .delete-btn').forEach(btn => {
          btn.addEventListener('click', function() {
            const userId = parseInt(this.getAttribute('data-id'));
            deleteUser(userId);
          });
        });
      }
      
      // نمایش لیست صنف‌ها
      function renderClassesList() {
        const classesList = document.getElementById('classesList');
        
        classesList.innerHTML = '';
        
        if (classes.length === 0) {
          classesList.innerHTML = '<div class="list-item"><div class="info">هیچ صنفی ثبت نشده است</div></div>';
          return;
        }
        
        classes.forEach(classItem => {
          const listItem = document.createElement('div');
          listItem.className = 'list-item';
          
          listItem.innerHTML = `
            <div class="info">
              <div class="meta">${classItem.name}</div>
              <div class="status">استاد: ${classItem.teacher} - تعداد شاگردان: ${classItem.students}</div>
            </div>
            <div class="actions">
              <button class="edit-btn" data-id="${classItem.id}"><i class="fas fa-edit"></i></button>
              <button class="delete-btn" data-id="${classItem.id}"><i class="fas fa-trash"></i></button>
            </div>
          `;
          
          classesList.appendChild(listItem);
        });
        
        // اضافه کردن event listener برای دکمه‌های حذف
        document.querySelectorAll('#classesList .delete-btn').forEach(btn => {
          btn.addEventListener('click', function() {
            const classId = parseInt(this.getAttribute('data-id'));
            deleteClass(classId);
          });
        });
      }
      
      // حذف کاربر
      function deleteUser(userId) {
        if (confirm('آیا از حذف این کاربر اطمینان دارید؟')) {
          users = users.filter(user => user.id !== userId);
          localStorage.setItem('users', JSON.stringify(users));
          showToast('کاربر با موفقیت حذف شد');
          updateDashboardStats();
          renderParentsList();
          renderStudentsList();
        }
      }
      
      // حذف اعلان
      function deleteAnnouncement(announcementId) {
        if (confirm('آیا از حذف این اعلان اطمینان دارید؟')) {
          announcements = announcements.filter(ann => ann.id !== announcementId);
          localStorage.setItem('announcements', JSON.stringify(announcements));
          showToast('اعلان با موفقیت حذف شد');
          updateDashboardStats();
          renderAnnouncementsList();
        }
      }
      
      // حذف صنف
      function deleteClass(classId) {
        if (confirm('آیا از حذف این صنف اطمینان دارید؟')) {
          classes = classes.filter(cls => cls.id !== classId);
          localStorage.setItem('classes', JSON.stringify(classes));
          showToast('صنف با موفقیت حذف شد');
          updateDashboardStats();
          renderClassesList();
        }
      }
      
      // ایجاد نمودارها
      function createCharts() {
        // هیستوگرام
        const histCtx = document.getElementById('histChart').getContext('2d');
        new Chart(histCtx, {
          type: 'bar',
          data: {
            labels: ['شنبه', 'یکشنبه', 'دوشنبه', 'سه‌شنبه', 'چهارشنبه', 'پنجشنبه', 'جمعه'],
            datasets: [{
              label: 'تعداد فعالیت',
              data: [12, 19, 3, 5, 2, 3, 15],
              backgroundColor: 'rgba(13, 110, 253, 0.7)',
              borderColor: 'rgba(13, 110, 253, 1)',
              borderWidth: 1
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
              y: {
                beginAtZero: true
              }
            }
          }
        });
        
        // نمودار دایره‌ای
        const pieCtx = document.getElementById('pieChart').getContext('2d');
        new Chart(pieCtx, {
          type: 'pie',
          data: {
            labels: ['دانش‌آموزان', 'اساتید', 'کارمندان', 'والدین'],
            datasets: [{
              data: [45, 25, 15, 15],
              backgroundColor: [
                'rgba(13, 110, 253, 0.7)',
                'rgba(0, 180, 216, 0.7)',
                'rgba(108, 117, 125, 0.7)',
                'rgba(40, 167, 69, 0.7)'
              ],
              borderWidth: 1
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false
          }
        });
      }
      
      // مقداردهی اولیه
      document.addEventListener('DOMContentLoaded', function() {
        // مخفی کردن صفحه خوش‌آمدگویی در ابتدا
        welcomeScreen.style.display = 'none';
        
        // نمایش صفحه لودینگ
        loadingScreen.style.display = 'flex';
      });
    })();
  </script>
</body>
</html>
